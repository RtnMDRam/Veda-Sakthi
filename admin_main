import streamlit as st
import pandas as pd

# Sidebar: Authentication (simplified, recommend using Streamlit-Authenticator for real apps)
st.sidebar.title("Login")
role = st.sidebar.selectbox("Role", ["Admin", "Translator", "SME"])
username = st.sidebar.text_input("Username")
password = st.sidebar.text_input("Password", type="password")

if st.sidebar.button("Login"):
    # Authentication checks here
    st.session_state["logged_in"] = True
    st.session_state["role"] = role

if st.session_state.get("logged_in"):

    st.title("Translation Admin Panel")
    
    # 1. Upload & Preview
    uploaded_file = st.file_uploader("Upload English–Tamil CSV", type=["csv", "xlsx"])
    if uploaded_file:
        df = pd.read_csv(uploaded_file)
        st.write(df)
        # Column mapping, QC, etc.
    
    # 2. Content Management
    st.header("Lesson Library")
    # List lessons by subject/course, allow download/upload
    
    # 3. Glossary Management
    st.header("Glossary")
    glossary_file = st.file_uploader("Upload Glossary CSV", type=["csv"])
    if glossary_file:
        glossary = pd.read_csv(glossary_file)
        st.write(glossary)
        # Add locking/checking interface
    
    # 4. Analytics & Status
    st.header("Translation Progress")
    # Show progress bars/charts
    st.line_chart([30, 50, 80])  # Example data
    
    # 5. Tamil Date Display
    import datetime
    st.write("Tamil date: புரட்டாசி 27 / " + datetime.datetime.now().strftime("%Y %b %d"))
    
else:
    st.warning('Please log in to access the admin panel.')
